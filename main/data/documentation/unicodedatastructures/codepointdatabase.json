{"hierarchy":{"paths":[["doc:\/\/com.karwa.WebURL\/documentation\/UnicodeDataStructures"]]},"primaryContentSections":[{"declarations":[{"platforms":["Linux"],"tokens":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"CodePointDatabase"},{"kind":"text","text":"<"},{"kind":"genericParameter","text":"Schema"},{"kind":"text","text":"> "},{"kind":"keyword","text":"where"},{"kind":"text","text":" "},{"kind":"typeIdentifier","text":"Schema"},{"kind":"text","text":" : "},{"kind":"typeIdentifier","identifier":"doc:\/\/com.karwa.WebURL\/documentation\/UnicodeDataStructures\/CodePointDatabase_Schema","preciseIdentifier":"s:21UnicodeDataStructures24CodePointDatabase_SchemaP","text":"CodePointDatabase_Schema"}],"languages":["swift"]}],"kind":"declarations"},{"content":[{"type":"heading","anchor":"overview","text":"Overview","level":2},{"type":"paragraph","inlineContent":[{"type":"text","text":"Databases can be constructed using a "},{"type":"codeVoice","code":"CodePointDatabase.Builder"},{"type":"text","text":", after which they may be queried,"},{"type":"text","text":" "},{"type":"text","text":"or printed as a Swift source file."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Data is stored in 3 sections:"}]},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"type":"text","text":"A direct lookup for ASCII code-points, to values of the "},{"type":"codeVoice","code":"Schema.ASCIIData"},{"type":"text","text":" type."}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"A 2-stage, indexed lookup for BMP code-points, to values of the ","type":"text"},{"type":"codeVoice","code":"Schema.UnicodeData"},{"text":" type.","type":"text"}]},{"type":"paragraph","inlineContent":[{"text":"The top N bits of the code-point are indexed, where N is chosen by the Schema.","type":"text"},{"text":" ","type":"text"},{"text":"This means a O(1), branchless reduction in the search space to a block of entries covering 2^(16 - N) code-points.","type":"text"},{"text":" ","type":"text"},{"text":"For a list of ","type":"text"},{"type":"codeVoice","code":"n"},{"text":" elements, a binary-search requires a maximum of ","type":"text"},{"type":"codeVoice","code":"log2(n)"},{"text":" comparisons,","type":"text"},{"text":" ","type":"text"},{"text":"meaning that in the worst case, when every code-point has an individual data entry, we would need a maximum","type":"text"},{"text":" ","type":"text"},{"text":"of (16 - N) comparisons to locate the data for an arbitrary code-point.","type":"text"}]},{"type":"paragraph","inlineContent":[{"text":"Often it will be much fewer than that, because the data entries are grouped in to regions.","type":"text"},{"text":" ","type":"text"},{"text":"For example, the IDNA mapping table has about 4000 entries for all 2^16 code-points in the BMP.","type":"text"},{"text":" ","type":"text"},{"text":"Code-point and data tables are split to avoid padding and improve cache performance.","type":"text"}]}]},{"content":[{"inlineContent":[{"type":"text","text":"Per-plane binary-searched tables for non-BMP code-points, to values of the "},{"code":"Schema.UnicodeData","type":"codeVoice"},{"type":"text","text":" type."}],"type":"paragraph"},{"inlineContent":[{"type":"text","text":"Most planes outside the BMP are "},{"type":"reference","identifier":"https:\/\/en.wikipedia.org\/wiki\/Plane_(Unicode)","isActive":true},{"type":"text","text":", but"},{"type":"text","text":" "},{"type":"text","text":"the ones that are include plane 1, the SMP (mostly historic scripts and emoji), and planes 2 and 3 -"},{"type":"text","text":" "},{"type":"text","text":"the SIP and TIP respectively, containing CJK ideographs."}],"type":"paragraph"},{"inlineContent":[{"type":"text","text":"Per-plane tables means we can represent code-points as 16-bit values, which more efficiently"},{"type":"text","text":" "},{"type":"text","text":"packs their contents and improves cache utilization. Code-point and data tables are split"},{"type":"text","text":" "},{"type":"text","text":"to avoid padding and also improve cache performance."}],"type":"paragraph"}]}]}],"kind":"content"}],"sections":[],"identifier":{"url":"doc:\/\/com.karwa.WebURL\/documentation\/UnicodeDataStructures\/CodePointDatabase","interfaceLanguage":"swift"},"schemaVersion":{"patch":0,"major":0,"minor":3},"abstract":[{"text":"An immutable database of information about Unicode code-points.","type":"text"}],"variants":[{"traits":[{"interfaceLanguage":"swift"}],"paths":["\/documentation\/unicodedatastructures\/codepointdatabase"]}],"topicSections":[{"title":"Structures","identifiers":["doc:\/\/com.karwa.WebURL\/documentation\/UnicodeDataStructures\/CodePointDatabase\/BMPIndex"]},{"identifiers":["doc:\/\/com.karwa.WebURL\/documentation\/UnicodeDataStructures\/CodePointDatabase\/init(asciiData:bmpIndex:bmpData:nonbmpData:)"],"title":"Initializers"},{"identifiers":["doc:\/\/com.karwa.WebURL\/documentation\/UnicodeDataStructures\/CodePointDatabase\/subscript(_:)"],"title":"Subscripts"},{"identifiers":["doc:\/\/com.karwa.WebURL\/documentation\/UnicodeDataStructures\/CodePointDatabase\/SplitTable"],"title":"Type Aliases"},{"identifiers":["doc:\/\/com.karwa.WebURL\/documentation\/UnicodeDataStructures\/CodePointDatabase\/LookupResult"],"title":"Enumerations"}],"kind":"symbol","metadata":{"role":"symbol","symbolKind":"struct","externalID":"s:21UnicodeDataStructures17CodePointDatabaseV","fragments":[{"text":"struct","kind":"keyword"},{"text":" ","kind":"text"},{"text":"CodePointDatabase","kind":"identifier"}],"modules":[{"name":"UnicodeDataStructures"}],"title":"CodePointDatabase","navigatorTitle":[{"text":"CodePointDatabase","kind":"identifier"}],"roleHeading":"Structure"},"references":{"doc://com.karwa.WebURL/documentation/UnicodeDataStructures/CodePointDatabase/subscript(_:)":{"role":"symbol","fragments":[{"text":"subscript","kind":"keyword"},{"text":"(","kind":"text"},{"text":"Unicode","kind":"typeIdentifier","preciseIdentifier":"s:s7UnicodeO"},{"text":".","kind":"text"},{"text":"Scalar","kind":"typeIdentifier","preciseIdentifier":"s:s7UnicodeO6ScalarV"},{"text":") -> ","kind":"text"},{"text":"CodePointDatabase","kind":"typeIdentifier","preciseIdentifier":"s:21UnicodeDataStructures17CodePointDatabaseV"},{"text":"<","kind":"text"},{"text":"Schema","kind":"typeIdentifier"},{"text":">.","kind":"text"},{"text":"LookupResult","kind":"typeIdentifier","preciseIdentifier":"s:21UnicodeDataStructures17CodePointDatabaseV12LookupResultO"}],"abstract":[],"conformance":{"availabilityPrefix":[{"type":"text","text":"Available when"}],"constraints":[{"type":"codeVoice","code":"Schema"},{"type":"text","text":" conforms to "},{"type":"codeVoice","code":"CodePointDatabase_Schema"},{"type":"text","text":"."}],"conformancePrefix":[{"type":"text","text":"Conforms when"}]},"url":"\/documentation\/unicodedatastructures\/codepointdatabase\/subscript(_:)","title":"subscript(_:)","kind":"symbol","identifier":"doc:\/\/com.karwa.WebURL\/documentation\/UnicodeDataStructures\/CodePointDatabase\/subscript(_:)","type":"topic"},"doc://com.karwa.WebURL/documentation/UnicodeDataStructures/CodePointDatabase/init(asciiData:bmpIndex:bmpData:nonbmpData:)":{"title":"init(asciiData:bmpIndex:bmpData:nonbmpData:)","type":"topic","fragments":[{"text":"init","kind":"identifier"},{"kind":"text","text":"("},{"kind":"externalParam","text":"asciiData"},{"kind":"text","text":": ["},{"kind":"typeIdentifier","text":"Schema"},{"kind":"text","text":"."},{"kind":"typeIdentifier","text":"ASCIIData"},{"kind":"text","text":"."},{"kind":"typeIdentifier","text":"RawStorage"},{"kind":"text","text":"], "},{"kind":"externalParam","text":"bmpIndex"},{"kind":"text","text":": ["},{"kind":"typeIdentifier","text":"CodePointDatabase","preciseIdentifier":"s:21UnicodeDataStructures17CodePointDatabaseV"},{"kind":"text","text":"<"},{"kind":"typeIdentifier","text":"Schema"},{"kind":"text","text":">."},{"kind":"typeIdentifier","text":"BMPIndex","preciseIdentifier":"s:21UnicodeDataStructures17CodePointDatabaseV8BMPIndexV"},{"kind":"text","text":"."},{"kind":"typeIdentifier","text":"IndexStorage","preciseIdentifier":"s:21UnicodeDataStructures17CodePointDatabaseV8BMPIndexV12IndexStoragea"},{"kind":"text","text":"], "},{"kind":"externalParam","text":"bmpData"},{"kind":"text","text":": "},{"preciseIdentifier":"s:21UnicodeDataStructures17CodePointDatabaseV","text":"CodePointDatabase","kind":"typeIdentifier"},{"text":"<","kind":"text"},{"text":"Schema","kind":"typeIdentifier"},{"text":">.","kind":"text"},{"preciseIdentifier":"s:21UnicodeDataStructures17CodePointDatabaseV10SplitTablea","text":"SplitTable","kind":"typeIdentifier"},{"text":"<","kind":"text"},{"preciseIdentifier":"s:s6UInt16V","text":"UInt16","kind":"typeIdentifier"},{"text":", ","kind":"text"},{"text":"Schema","kind":"typeIdentifier"},{"text":".","kind":"text"},{"text":"UnicodeData","kind":"typeIdentifier"},{"text":".","kind":"text"},{"text":"RawStorage","kind":"typeIdentifier"},{"text":">, ","kind":"text"},{"text":"nonbmpData","kind":"externalParam"},{"text":": [","kind":"text"},{"text":"CodePointDatabase","kind":"typeIdentifier","preciseIdentifier":"s:21UnicodeDataStructures17CodePointDatabaseV"},{"text":"<","kind":"text"},{"text":"Schema","kind":"typeIdentifier"},{"text":">.","kind":"text"},{"text":"SplitTable","kind":"typeIdentifier","preciseIdentifier":"s:21UnicodeDataStructures17CodePointDatabaseV10SplitTablea"},{"text":"<","kind":"text"},{"text":"UInt16","kind":"typeIdentifier","preciseIdentifier":"s:s6UInt16V"},{"text":", ","kind":"text"},{"text":"Schema","kind":"typeIdentifier"},{"text":".","kind":"text"},{"text":"UnicodeData","kind":"typeIdentifier"},{"text":".","kind":"text"},{"text":"RawStorage","kind":"typeIdentifier"},{"text":">])","kind":"text"}],"role":"symbol","kind":"symbol","abstract":[{"text":"Initializes a database from static data.","type":"text"}],"url":"\/documentation\/unicodedatastructures\/codepointdatabase\/init(asciidata:bmpindex:bmpdata:nonbmpdata:)","identifier":"doc:\/\/com.karwa.WebURL\/documentation\/UnicodeDataStructures\/CodePointDatabase\/init(asciiData:bmpIndex:bmpData:nonbmpData:)"},"doc://com.karwa.WebURL/documentation/UnicodeDataStructures/CodePointDatabase/SplitTable":{"title":"CodePointDatabase.SplitTable","type":"topic","fragments":[{"text":"typealias","kind":"keyword"},{"text":" ","kind":"text"},{"kind":"identifier","text":"SplitTable"}],"role":"symbol","kind":"symbol","abstract":[],"navigatorTitle":[{"kind":"identifier","text":"SplitTable"}],"url":"\/documentation\/unicodedatastructures\/codepointdatabase\/splittable","identifier":"doc:\/\/com.karwa.WebURL\/documentation\/UnicodeDataStructures\/CodePointDatabase\/SplitTable"},"doc://com.karwa.WebURL/documentation/UnicodeDataStructures/CodePointDatabase/BMPIndex":{"title":"CodePointDatabase.BMPIndex","type":"topic","fragments":[{"text":"struct","kind":"keyword"},{"text":" ","kind":"text"},{"kind":"identifier","text":"BMPIndex"}],"role":"symbol","kind":"symbol","abstract":[],"navigatorTitle":[{"kind":"identifier","text":"BMPIndex"}],"url":"\/documentation\/unicodedatastructures\/codepointdatabase\/bmpindex","identifier":"doc:\/\/com.karwa.WebURL\/documentation\/UnicodeDataStructures\/CodePointDatabase\/BMPIndex"},"doc://com.karwa.WebURL/documentation/UnicodeDataStructures/CodePointDatabase":{"title":"CodePointDatabase","type":"topic","fragments":[{"text":"struct","kind":"keyword"},{"kind":"text","text":" "},{"kind":"identifier","text":"CodePointDatabase"}],"role":"symbol","kind":"symbol","abstract":[{"text":"An immutable database of information about Unicode code-points.","type":"text"}],"navigatorTitle":[{"kind":"identifier","text":"CodePointDatabase"}],"url":"\/documentation\/unicodedatastructures\/codepointdatabase","identifier":"doc:\/\/com.karwa.WebURL\/documentation\/UnicodeDataStructures\/CodePointDatabase"},"doc://com.karwa.WebURL/documentation/UnicodeDataStructures":{"kind":"symbol","identifier":"doc:\/\/com.karwa.WebURL\/documentation\/UnicodeDataStructures","role":"collection","title":"UnicodeDataStructures","abstract":[],"url":"\/documentation\/unicodedatastructures","type":"topic"},"doc://com.karwa.WebURL/documentation/UnicodeDataStructures/CodePointDatabase/LookupResult":{"title":"CodePointDatabase.LookupResult","role":"symbol","navigatorTitle":[{"text":"LookupResult","kind":"identifier"}],"identifier":"doc:\/\/com.karwa.WebURL\/documentation\/UnicodeDataStructures\/CodePointDatabase\/LookupResult","kind":"symbol","url":"\/documentation\/unicodedatastructures\/codepointdatabase\/lookupresult","abstract":[],"conformance":{"availabilityPrefix":[{"text":"Available when","type":"text"}],"conformancePrefix":[{"text":"Conforms when","type":"text"}],"constraints":[{"type":"codeVoice","code":"Schema"},{"text":" conforms to ","type":"text"},{"code":"CodePointDatabase_Schema","type":"codeVoice"},{"text":".","type":"text"}]},"fragments":[{"text":"enum","kind":"keyword"},{"text":" ","kind":"text"},{"text":"LookupResult","kind":"identifier"}],"type":"topic"},"doc://com.karwa.WebURL/documentation/UnicodeDataStructures/CodePointDatabase_Schema":{"type":"topic","identifier":"doc:\/\/com.karwa.WebURL\/documentation\/UnicodeDataStructures\/CodePointDatabase_Schema","navigatorTitle":[{"kind":"identifier","text":"CodePointDatabase_Schema"}],"title":"CodePointDatabase_Schema","kind":"symbol","abstract":[{"type":"text","text":"Describes the data associated with code-points in a "},{"type":"codeVoice","code":"CodePointDatabase"},{"type":"text","text":"."}],"url":"\/documentation\/unicodedatastructures\/codepointdatabase_schema","fragments":[{"kind":"keyword","text":"protocol"},{"kind":"text","text":" "},{"kind":"identifier","text":"CodePointDatabase_Schema"}],"role":"symbol"},"https://en.wikipedia.org/wiki/Plane_(Unicode)":{"titleInlineContent":[{"type":"text","text":"not assigned"}],"type":"link","title":"not assigned","identifier":"https:\/\/en.wikipedia.org\/wiki\/Plane_(Unicode)","url":"https:\/\/en.wikipedia.org\/wiki\/Plane_(Unicode)"}}}