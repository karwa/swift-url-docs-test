{"metadata":{"externalID":"s:6WebURLAAV6originAB6OriginVvp","role":"symbol","symbolKind":"property","extendedModule":"WebURL","title":"origin","roleHeading":"Instance Property","modules":[{"name":"WebURL"}],"fragments":[{"text":"var","kind":"keyword"},{"text":" ","kind":"text"},{"text":"origin","kind":"identifier"},{"text":": ","kind":"text"},{"preciseIdentifier":"s:6WebURLAAV","text":"WebURL","kind":"typeIdentifier"},{"text":".","kind":"text"},{"kind":"typeIdentifier","preciseIdentifier":"s:6WebURLAAV6OriginV","text":"Origin"}]},"topicSections":[{"title":"Checking If an Origin Is Opaque","identifiers":["doc:\/\/com.karwa.WebURL\/documentation\/WebURL\/WebURL\/Origin-swift.struct\/isOpaque"]},{"title":"Obtaining an Origin’s String Representation","identifiers":["doc:\/\/com.karwa.WebURL\/documentation\/WebURL\/WebURL\/Origin-swift.struct\/serialized"]},{"identifiers":["doc:\/\/com.karwa.WebURL\/documentation\/WebURL\/WebURL\/Origin-swift.struct"],"title":"Origin Type"}],"kind":"symbol","schemaVersion":{"major":0,"minor":3,"patch":0},"seeAlsoSections":[{"generated":true,"identifiers":["doc:\/\/com.karwa.WebURL\/documentation\/WebURL\/WebURL\/Host-swift.enum","doc:\/\/com.karwa.WebURL\/documentation\/WebURL\/WebURL\/host-swift.property"],"title":"Network Hosts and Origins"}],"identifier":{"interfaceLanguage":"swift","url":"doc:\/\/com.karwa.WebURL\/documentation\/WebURL\/WebURL\/origin-swift.property"},"hierarchy":{"paths":[["doc:\/\/com.karwa.WebURL\/documentation\/WebURL","doc:\/\/com.karwa.WebURL\/documentation\/WebURL\/WebURL"]]},"sections":[],"primaryContentSections":[{"kind":"declarations","declarations":[{"platforms":["Linux"],"languages":["swift"],"tokens":[{"text":"var","kind":"keyword"},{"text":" ","kind":"text"},{"text":"origin","kind":"identifier"},{"text":": ","kind":"text"},{"identifier":"doc:\/\/com.karwa.WebURL\/documentation\/WebURL\/WebURL","text":"WebURL","preciseIdentifier":"s:6WebURLAAV","kind":"typeIdentifier"},{"text":".","kind":"text"},{"identifier":"doc:\/\/com.karwa.WebURL\/documentation\/WebURL\/WebURL\/Origin-swift.struct","text":"Origin","preciseIdentifier":"s:6WebURLAAV6OriginV","kind":"typeIdentifier"},{"text":" { ","kind":"text"},{"text":"get","kind":"keyword"},{"text":" }","kind":"text"}]}]},{"kind":"content","content":[{"text":"Discussion","level":2,"anchor":"discussion","type":"heading"},{"inlineContent":[{"text":"Origins are the fundamental currency of web security. Two actors on the Web platform that share an origin are","type":"text"},{"text":" ","type":"text"},{"text":"assumed to trust each other and to have the same authority. Actors with differing origins are","type":"text"},{"text":" ","type":"text"},{"text":"considered potentially hostile versus each other, and are isolated from each other to varying degrees.","type":"text"}],"type":"paragraph"},{"inlineContent":[{"type":"text","text":"To check if two URLs have the same origin, compare their origin properties using the "},{"type":"codeVoice","code":"=="},{"type":"text","text":" operator."}],"type":"paragraph"},{"syntax":"swift","code":["let urlA = WebURL(\"https:\/\/example.com\/foo\")!","let urlB = WebURL(\"https:\/\/github.com\/karwa\/swift-url\")!","","guard urlA.origin == urlB.origin else {","  \/\/ Cross-origin access rejected:","  \/\/ 'example.com' is not same-origin with 'github.com'.","}"],"type":"codeListing"},{"text":"Known and Opaque Origins","level":3,"anchor":"Known-and-Opaque-Origins","type":"heading"},{"inlineContent":[{"type":"text","text":"A URL may have one of two types of origins, depending on its "},{"identifier":"doc:\/\/com.karwa.WebURL\/documentation\/WebURL\/WebURL\/scheme","type":"reference","isActive":true},{"type":"text","text":" and whether that scheme establishes"},{"type":"text","text":" "},{"type":"text","text":"an authority context. Origins of URLs known to the standard are internal tuples, consisting of"},{"type":"text","text":" "},{"type":"text","text":"their (scheme, "},{"identifier":"doc:\/\/com.karwa.WebURL\/documentation\/WebURL\/WebURL\/hostname","type":"reference","isActive":true},{"type":"text","text":", and "},{"identifier":"doc:\/\/com.karwa.WebURL\/documentation\/WebURL\/WebURL\/port","type":"reference","isActive":true},{"type":"text","text":"). Origins of other URLs are known as "},{"inlineContent":[{"text":"opaque","type":"text"}],"type":"strong"},{"type":"text","text":"."}],"type":"paragraph"},{"inlineContent":[{"type":"text","text":"If a URL has an opaque origin, it means that no obvious domain of trust can be established from the URL"},{"type":"text","text":" "},{"type":"text","text":"according to the standard. The "},{"type":"reference","identifier":"https:\/\/html.spec.whatwg.org\/multipage\/origin.html#concept-origin-opaque","isActive":true},{"type":"text","text":" describes such an origin as"},{"type":"text","text":" "},{"type":"text","text":"“an internal value […] for which the only meaningful operation is testing for equality”."}],"type":"paragraph"},{"rows":[[[{"inlineContent":[{"text":"Schemes","type":"text"}],"type":"paragraph"}],[{"inlineContent":[{"type":"text","text":"Example"}],"type":"paragraph"}],[{"inlineContent":[{"type":"text","text":"Origin"}],"type":"paragraph"}]],[[{"inlineContent":[{"text":"http(s), ws(s),ftp","type":"text"}],"type":"paragraph"}],[{"inlineContent":[{"code":"http:\/\/user@example.com","type":"codeVoice"}],"type":"paragraph"}],[{"inlineContent":[{"type":"text","text":"(http, example.com, 80)"}],"type":"paragraph"}]],[[{"inlineContent":[{"text":"blob*","type":"text"}],"type":"paragraph"}],[{"inlineContent":[{"code":"blob:http:\/\/user@example.com","type":"codeVoice"}],"type":"paragraph"}],[{"inlineContent":[{"type":"text","text":"(http, example.com, 80)"}],"type":"paragraph"}]],[[{"inlineContent":[{"type":"text","text":"file"}],"type":"paragraph"}],[{"inlineContent":[{"type":"codeVoice","code":"file:\/\/\/usr\/bin\/swift"}],"type":"paragraph"}],[{"inlineContent":[{"type":"text","text":"Opaque"}],"type":"paragraph"}]],[[{"inlineContent":[{"text":"everything else","type":"text"}],"type":"paragraph"}],[{"inlineContent":[{"type":"codeVoice","code":"my.app:\/settings\/language"}],"type":"paragraph"}],[{"inlineContent":[{"text":"Opaque","type":"text"}],"type":"paragraph"}]]],"header":"row","type":"table"},{"inlineContent":[{"inlineContent":[{"text":"* if it has an opaque path containing another URL","type":"text"}],"type":"emphasis"}],"type":"paragraph"},{"inlineContent":[{"text":"An opaque origin does ","type":"text"},{"inlineContent":[{"text":"not","type":"text"}],"type":"strong"},{"text":" not mean “not present” or “empty” in the sense that ","type":"text"},{"code":"nil","type":"codeVoice"},{"text":" values do,","type":"text"},{"text":" ","type":"text"},{"text":"as two ","type":"text"},{"code":"nil","type":"codeVoice"},{"text":"s are considered equal to each other. Opaque origins are ","type":"text"},{"inlineContent":[{"type":"text","text":"undefined"}],"type":"emphasis"},{"text":" security domains;","type":"text"},{"text":" ","type":"text"},{"text":"they must be considered ","type":"text"},{"inlineContent":[{"text":"not equal","type":"text"}],"type":"strong"},{"text":" to any other origin, and be maximally isolated.","type":"text"}],"type":"paragraph"},{"name":"Note","style":"note","content":[{"type":"paragraph","inlineContent":[{"text":"","type":"text"},{"text":" ","type":"text"},{"text":"This indeed means that opaque origins do not compare as ","type":"text"},{"type":"codeVoice","code":"=="},{"text":" with themselves.","type":"text"}]}],"type":"aside"},{"text":"Custom Origin-like Concepts","level":3,"anchor":"Custom-Origin-like-Concepts","type":"heading"},{"inlineContent":[{"type":"text","text":"Despite there being URLs which the standard cannot compute security domains for,"},{"type":"text","text":" "},{"type":"text","text":"an application or library is free to augment that knowledge to establish its own origin-like concept"},{"type":"text","text":" "},{"type":"text","text":"for isolating domains of trust from one another:"}],"type":"paragraph"},{"syntax":"swift","code":["enum SecurityDomain {","","  \/\/\/ Security domain is 'obvious' due to URL scheme","  \/\/\/ being known by the standard.","  case derivedFromURL(WebURL.Origin)","","  \/\/\/ A security domain which has been established","  \/\/\/ by application-specific logic.","  case applicationDefined(MyApp.RealmOfTrust)","","  \/\/\/ Opaque origin, unable to determine a security domain.","  \/\/\/ These must be maximally isolated from each other.","  case undefinedOpaque","","  \/\/\/ Checks whether two security domains are considered equivalent.","  static func == (lhs: Self, rhs: Self) -> Bool {","    switch (lhs, rhs) {","    case (.derivedFromURL(let lhsOrigin), .derivedFromURL(let rhsOrigin)):","      return lhsOrigin == rhsOrigin","    case (.applicationDefined(let lhsRealm), .applicationDefined(let rhsRealm)):","      return lhsRealm == rhsRealm","    default:","      return false","    }","  }","}"],"type":"codeListing"},{"inlineContent":[{"text":"When designing such a type, it may be helpful to read ","type":"text"},{"isActive":true,"type":"reference","identifier":"https:\/\/tools.ietf.org\/html\/rfc6454"},{"text":" ","type":"text"},{"text":"for a holistic understanding of how the web’s origin-based security model works.","type":"text"}],"type":"paragraph"},{"text":"Origins in Hash Tables","level":3,"anchor":"Origins-in-Hash-Tables","type":"heading"},{"inlineContent":[{"text":"Because opaque origins do not compare as ","type":"text"},{"code":"==","type":"codeVoice"},{"text":" with themselves, it is ","type":"text"},{"inlineContent":[{"text":"strongly","type":"text"}],"type":"strong"},{"text":" advised that you","type":"text"},{"text":" ","type":"text"},{"text":"do not store them in hash tables such as ","type":"text"},{"code":"Dictionary","type":"codeVoice"},{"text":" or ","type":"text"},{"code":"Set","type":"codeVoice"},{"text":". Doing so is not meaningful","type":"text"},{"text":" ","type":"text"},{"text":"and will degrade the table’s performance.","type":"text"}],"type":"paragraph"},{"inlineContent":[{"text":"It is, however, perfectly fine to store ","type":"text"},{"inlineContent":[{"type":"text","text":"non-opaque"}],"type":"strong"},{"text":" origins in these types.","type":"text"}],"type":"paragraph"},{"syntax":"swift","code":["var allowedOrigins: Set<WebURL.Origin> = []","","let opaqueOrigin = WebURL(\"file:\/\/\/usr\/bin\/swift\")!.origin","allowedOrigins.insert(opaqueOrigin)","allowedOrigins.contains(opaqueOrigin) \/\/ ❗️ False.","","let knownOrigin = WebURL(\"https:\/\/example.com\/foo\")!.origin","allowedOrigins.insert(knownOrigin)","allowedOrigins.contains(knownOrigin) \/\/ ✅ True."],"type":"codeListing"}]}],"abstract":[{"text":"The domain of trust this URL belongs to, according to the web’s security model.","type":"text"}],"variants":[{"traits":[{"interfaceLanguage":"swift"}],"paths":["\/documentation\/weburl\/weburl\/origin-swift.property"]}],"references":{"doc://com.karwa.WebURL/documentation/WebURL/WebURL/Origin-swift.struct/isOpaque":{"kind":"symbol","fragments":[{"kind":"keyword","text":"var"},{"kind":"text","text":" "},{"kind":"identifier","text":"isOpaque"},{"kind":"text","text":": "},{"kind":"typeIdentifier","preciseIdentifier":"s:Sb","text":"Bool"}],"identifier":"doc:\/\/com.karwa.WebURL\/documentation\/WebURL\/WebURL\/Origin-swift.struct\/isOpaque","title":"isOpaque","url":"\/documentation\/weburl\/weburl\/origin-swift.struct\/isopaque","abstract":[{"type":"text","text":"Whether this is an opaque origin, i.e. an undefined security domain."}],"role":"symbol","type":"topic"},"doc://com.karwa.WebURL/documentation/WebURL/WebURL/origin-swift.property":{"type":"topic","role":"symbol","abstract":[{"text":"The domain of trust this URL belongs to, according to the web’s security model.","type":"text"}],"kind":"symbol","fragments":[{"text":"var","kind":"keyword"},{"text":" ","kind":"text"},{"text":"origin","kind":"identifier"},{"text":": ","kind":"text"},{"kind":"typeIdentifier","text":"WebURL","preciseIdentifier":"s:6WebURLAAV"},{"kind":"text","text":"."},{"kind":"typeIdentifier","text":"Origin","preciseIdentifier":"s:6WebURLAAV6OriginV"}],"url":"\/documentation\/weburl\/weburl\/origin-swift.property","identifier":"doc:\/\/com.karwa.WebURL\/documentation\/WebURL\/WebURL\/origin-swift.property","title":"origin"},"https://html.spec.whatwg.org/multipage/origin.html#concept-origin-opaque":{"identifier":"https:\/\/html.spec.whatwg.org\/multipage\/origin.html#concept-origin-opaque","title":"HTML Standard","titleInlineContent":[{"type":"text","text":"HTML Standard"}],"url":"https:\/\/html.spec.whatwg.org\/multipage\/origin.html#concept-origin-opaque","type":"link"},"doc://com.karwa.WebURL/documentation/WebURL/WebURL/Origin-swift.struct/serialized":{"kind":"symbol","fragments":[{"kind":"keyword","text":"var"},{"kind":"text","text":" "},{"kind":"identifier","text":"serialized"},{"kind":"text","text":": "},{"kind":"typeIdentifier","preciseIdentifier":"s:SS","text":"String"}],"identifier":"doc:\/\/com.karwa.WebURL\/documentation\/WebURL\/WebURL\/Origin-swift.struct\/serialized","title":"serialized","url":"\/documentation\/weburl\/weburl\/origin-swift.struct\/serialized","abstract":[{"type":"text","text":"The string representation of this origin."}],"role":"symbol","type":"topic"},"doc://com.karwa.WebURL/documentation/WebURL/WebURL/host-swift.property":{"type":"topic","role":"symbol","abstract":[{"text":"The host of this URL, as interpreted by the standard.","type":"text"}],"kind":"symbol","fragments":[{"text":"var","kind":"keyword"},{"text":" ","kind":"text"},{"text":"host","kind":"identifier"},{"text":": ","kind":"text"},{"kind":"typeIdentifier","text":"WebURL","preciseIdentifier":"s:6WebURLAAV"},{"kind":"text","text":"."},{"kind":"typeIdentifier","text":"Host","preciseIdentifier":"s:6WebURLAAV4HostO"},{"kind":"text","text":"?"}],"url":"\/documentation\/weburl\/weburl\/host-swift.property","identifier":"doc:\/\/com.karwa.WebURL\/documentation\/WebURL\/WebURL\/host-swift.property","title":"host"},"doc://com.karwa.WebURL/documentation/WebURL/WebURL/port":{"abstract":[{"type":"text","text":"The port number of this URL."}],"role":"symbol","fragments":[{"text":"var","kind":"keyword"},{"text":" ","kind":"text"},{"kind":"identifier","text":"port"},{"kind":"text","text":": "},{"preciseIdentifier":"s:Si","kind":"typeIdentifier","text":"Int"},{"kind":"text","text":"?"}],"url":"\/documentation\/weburl\/weburl\/port","kind":"symbol","title":"port","identifier":"doc:\/\/com.karwa.WebURL\/documentation\/WebURL\/WebURL\/port","type":"topic"},"doc://com.karwa.WebURL/documentation/WebURL/WebURL/hostname":{"type":"topic","role":"symbol","abstract":[{"text":"The hostname of this URL.","type":"text"}],"kind":"symbol","fragments":[{"text":"var","kind":"keyword"},{"text":" ","kind":"text"},{"text":"hostname","kind":"identifier"},{"text":": ","kind":"text"},{"kind":"typeIdentifier","text":"String","preciseIdentifier":"s:SS"},{"kind":"text","text":"?"}],"url":"\/documentation\/weburl\/weburl\/hostname","identifier":"doc:\/\/com.karwa.WebURL\/documentation\/WebURL\/WebURL\/hostname","title":"hostname"},"doc://com.karwa.WebURL/documentation/WebURL":{"role":"collection","identifier":"doc:\/\/com.karwa.WebURL\/documentation\/WebURL","type":"topic","url":"\/documentation\/weburl","abstract":[{"text":"A new URL type for Swift.","type":"text"}],"title":"WebURL","kind":"symbol"},"https://tools.ietf.org/html/rfc6454":{"identifier":"https:\/\/tools.ietf.org\/html\/rfc6454","title":"RFC-6456 (“The Web Origin Concept”)","titleInlineContent":[{"type":"text","text":"RFC-6456 (“The Web Origin Concept”)"}],"url":"https:\/\/tools.ietf.org\/html\/rfc6454","type":"link"},"doc://com.karwa.WebURL/documentation/WebURL/WebURL/scheme":{"abstract":[{"type":"text","text":"The scheme of this URL, for example "},{"code":"https","type":"codeVoice"},{"type":"text","text":" or "},{"code":"file","type":"codeVoice"},{"type":"text","text":"."}],"role":"symbol","fragments":[{"kind":"keyword","text":"var"},{"kind":"text","text":" "},{"kind":"identifier","text":"scheme"},{"kind":"text","text":": "},{"text":"String","preciseIdentifier":"s:SS","kind":"typeIdentifier"}],"url":"\/documentation\/weburl\/weburl\/scheme","kind":"symbol","title":"scheme","identifier":"doc:\/\/com.karwa.WebURL\/documentation\/WebURL\/WebURL\/scheme","type":"topic"},"doc://com.karwa.WebURL/documentation/WebURL/WebURL":{"role":"symbol","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"WebURL"}],"identifier":"doc:\/\/com.karwa.WebURL\/documentation\/WebURL\/WebURL","type":"topic","url":"\/documentation\/weburl\/weburl","abstract":[{"text":"A Uniform Resource Locator (URL) is a universal identifier,","type":"text"},{"text":" ","type":"text"},{"text":"which often describes the location of a resource.","type":"text"}],"title":"WebURL","kind":"symbol","navigatorTitle":[{"kind":"identifier","text":"WebURL"}]},"doc://com.karwa.WebURL/documentation/WebURL/WebURL/Origin-swift.struct":{"type":"topic","role":"symbol","navigatorTitle":[{"text":"Origin","kind":"identifier"}],"abstract":[{"text":"A URL’s Origin is the domain of trust that it belongs to, according to the web’s security model.","type":"text"}],"kind":"symbol","fragments":[{"text":"struct","kind":"keyword"},{"text":" ","kind":"text"},{"text":"Origin","kind":"identifier"}],"url":"\/documentation\/weburl\/weburl\/origin-swift.struct","identifier":"doc:\/\/com.karwa.WebURL\/documentation\/WebURL\/WebURL\/Origin-swift.struct","title":"WebURL.Origin"},"doc://com.karwa.WebURL/documentation/WebURL/WebURL/Host-swift.enum":{"type":"topic","role":"symbol","navigatorTitle":[{"text":"Host","kind":"identifier"}],"abstract":[{"text":"A host, as interpreted by the URL Standard. A host is a network address or opaque identifier.","type":"text"}],"kind":"symbol","fragments":[{"text":"enum","kind":"keyword"},{"text":" ","kind":"text"},{"text":"Host","kind":"identifier"}],"url":"\/documentation\/weburl\/weburl\/host-swift.enum","identifier":"doc:\/\/com.karwa.WebURL\/documentation\/WebURL\/WebURL\/Host-swift.enum","title":"WebURL.Host"}}}